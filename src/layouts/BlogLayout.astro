---
import Layout from "./Layout.astro";

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  updatedDate?: Date;
  image?: string;
}

const { title, description, pubDate, updatedDate, image } = Astro.props;

const formatDate = (date: Date) =>
  date.toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  });
---

<Layout
  title={title}
  description={description}
  image={image}
  type="article"
  publishedTime={pubDate}
  modifiedTime={updatedDate}
>
  <main class="mx-auto max-w-[720px] px-6 py-12">
    <article>
      <header class="mb-8">
        <a
          href="/blog"
          class="mb-6 inline-flex items-center gap-2 text-sm text-accent transition-colors hover:text-primary"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="m15 18-6-6 6-6"></path>
          </svg>
          Back to blog
        </a>
        <h1 class="mb-4 text-3xl font-bold text-primary md:text-4xl">
          {title}
        </h1>
        <p class="mb-4 text-lg text-secondary">{description}</p>
        <div class="flex items-center gap-4 text-sm text-accent">
          <time datetime={pubDate.toISOString()}>
            {formatDate(pubDate)}
          </time>
          {
            updatedDate && (
              <span>
                (Updated: <time datetime={updatedDate.toISOString()}>{formatDate(updatedDate)}</time>)
              </span>
            )
          }
        </div>
      </header>
      <div class="prose prose-invert prose-gray max-w-none prose-headings:text-primary prose-p:text-secondary prose-a:text-primary prose-a:underline prose-a:underline-offset-2 hover:prose-a:text-accent prose-strong:text-primary prose-code:rounded prose-code:bg-white/10 prose-code:px-1.5 prose-code:py-0.5 prose-code:before:content-none prose-code:after:content-none prose-pre:bg-white/5 prose-blockquote:border-l-gray-700 prose-blockquote:text-accent prose-li:text-secondary">
        <slot />
      </div>
    </article>
  </main>
</Layout>
